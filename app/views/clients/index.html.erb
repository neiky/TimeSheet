<div class="page-header">
  <h2>Listing clients</h2>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Projects</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
  <% @clients.each do |client| %>
    <tr>
      <td><%= link_to client.name, client %></td>
      <td><%= client.description %></td>
      <td style="width:300px">
        <a href="#" class="buttonToggle" data-toggle-this="toggleProjectList<%= client.id %>"><i class="icon-list"></i> Projects</a>
        <div class="toggleVisibility" id="toggleProjectList<%= client.id %>">
        <ul>
          <% client.projects.each do |project| %>
          <li><%= link_to project, project_path(project) %></li>
          <% end %>
        </ul>
        </div>
      </td>
      <td>
      	<% if can? :update, client %>
	      	<%= link_to edit_client_path(client), :class => 'btn', :title => 'Edit' do %><i class="icon-pencil"></i><% end %>
	      	<%= link_to client, confirm: 'Are you sure?', method: :delete, :class => 'btn btn-danger', :title => 'Delete' do %><i class="icon-trash"></i><% end %>
      	<% end %>
      </td>
    </tr>
  <% end %>
  </tdody>
</table>

<br />

<%= link_to 'New Client', new_client_path, :class => 'btn btn-primary' %>